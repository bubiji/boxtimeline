(window.webpackJsonpweb=window.webpackJsonpweb||[]).push([[0],{142:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(46),l=a.n(c),u=(a(81),a(49)),o=a(9),i=a.n(o),s=a(20),m=a(7),p=a(72),f=a(12),v=a(75),d=a(25),h=(a(85),a(26)),b=a.n(h),E="";function w(e){return b()(E+"/api/search",{body:{question:e},method:"POST"})}function y(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"POST";return b()(E+"/api/triples",{body:{item:e,field:t,value:a},method:n})}function g(e){var t=e.field,a=e.value,n=e.onClick,c="value"+(a.length>10?" small":""),l="";return"homepage"===t||"download_url"===t||"repo"===t?l=r.a.createElement("a",{className:c,href:a,target:"_blank",rel:"noopener noreferrer"}," ",a," "):a.indexOf(" ")>-1||"code"===t||"spec_code"===t?l=r.a.createElement("span",{className:c}," ",a," "):(c+=" pointer",l=r.a.createElement("span",{className:c,onClick:function(){n&&n("".concat(t,":").concat(a))}}," ",a," ")),r.a.createElement("li",null,r.a.createElement("span",{className:"field"}," ",function(e){switch(e){case"subj":return"\u9879\u76ee\u540d\u79f0";case"repo":return"\u4ed3\u5e93\u5730\u5740";case"language":return"\u8bed\u8a00";case"default_branch":return"\u9ed8\u8ba4\u5206\u652f";case"tag_name":return"\u6807\u7b7e";case"download_url":return"\u4e0b\u8f7d\u5730\u5740";case"main_language":return"\u4e3b\u8981\u8bed\u8a00";case"code":return"\u4ee3\u7801\u884c\u6570";default:return e}}(t),": "),l)}function j(e){var t=e.query_type,a=e.answer,n=e.msg,c=e.onClick,l=function(e){return function(){c&&c(e)}};if(-1===t)return r.a.createElement("p",null," ",n," ");if(4===t)return r.a.createElement("p",null," ",a," ");if(1===t){var u=[];for(var o in a)u.push(r.a.createElement(g,{field:o,value:a[o],onClick:c}));return r.a.createElement("ul",{className:"subj_attrs"},r.a.createElement("li",{className:"add_triples"}," ",r.a.createElement(k,{item:a.subj,onChange:c})," "),u)}if(5===t){var i=[],s=!0,m=!1,p=void 0;try{for(var f,v=a[Symbol.iterator]();!(s=(f=v.next()).done);s=!0){var d=f.value;i.push(r.a.createElement("li",{key:d[0],onClick:l(d[1])}," ",r.a.createElement("span",null," ",d[1]," ")," "))}}catch(h){m=!0,p=h}finally{try{s||null==v.return||v.return()}finally{if(m)throw p}}return r.a.createElement("ul",{className:"subj"}," ",i," ")}return r.a.createElement("p",null)}function O(){var e=Object(n.useState)("goconvey"),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)({}),u=Object(m.a)(l,2),o=u[0],p=u[1],f=function(){var e=Object(s.a)(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t?c(t):t=a,t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,w(t);case 5:n=e.sent,p(n);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"App-main"},r.a.createElement("input",{className:"search",type:"text",value:a,onChange:function(e){c(e.target.value)},onKeyDown:function(e){e&&13===e.keyCode&&f()}}),r.a.createElement(j,Object.assign({},o,{onClick:f})))}function k(e){var t=e.item,a=e.onChange,c=Object(n.useState)(""),l=Object(m.a)(c,2),u=l[0],o=l[1],p=Object(n.useState)(""),f=Object(m.a)(p,2),v=f[0],d=f[1];function h(){return!!t&&(!!u&&!!v)}function b(e){return Object(s.a)(i.a.mark(function n(){var r;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(h()){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,y(t,u,v,e);case 5:r=n.sent,alert(r),a(),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),alert(n.t0.message);case 13:case"end":return n.stop()}},n,null,[[2,10]])}))}return r.a.createElement("div",{className:"triples"},r.a.createElement("input",{type:"text",placeholder:"field",onChange:function(e){o(e.target.value)},value:u}),r.a.createElement("input",{type:"text",placeholder:"value",onChange:function(e){d(e.target.value)},value:v}),r.a.createElement("button",{onClick:b("POST"),disabled:!h()}," \u4fdd\u5b58 "),r.a.createElement("button",{onClick:b("DELETE"),disabled:!h(),className:"delete"}," \u5220\u9664 "))}function x(e){var t=e.children;return r.a.createElement("div",{className:"chat-line chat-line-left"},r.a.createElement("div",{className:"chat-left"},t))}function S(e){var t=e.children;return r.a.createElement("div",{className:"chat-line chat-line-right"},r.a.createElement("div",{className:"chat-right"},t))}function N(){var e=Object(n.useState)("goconvey"),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),o=Object(m.a)(l,2),p=o[0],f=o[1],v=function(){var e=Object(s.a)(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t?c(t):t=a,t){e.next=3;break}return e.abrupt("return");case 3:return f(function(e){return[].concat(Object(u.a)(e),[{q:t}])}),e.next=6,w(t);case 6:n=e.sent,f(function(e){return[].concat(Object(u.a)(e),[{a:n}])}),c(""),setTimeout(function(){document.querySelector(".view").scrollIntoView()},100);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"App-main"},r.a.createElement("div",{className:"chat"},p.map(function(e){return e.q?r.a.createElement(x,null," ",e.q," "):r.a.createElement(S,null,r.a.createElement(j,e.a))}),r.a.createElement("div",{className:"view"}," ")),r.a.createElement("input",{className:"search",type:"text",value:a,onChange:function(e){c(e.target.value)},onKeyDown:function(e){e&&13===e.keyCode&&v()}}))}function C(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),u=Object(m.a)(l,2),o=u[0],p=u[1],f=Object(n.useState)("subj"),h=Object(m.a)(f,2),w=h[0],y=h[1];function g(){return(g=Object(s.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a={subj:w,source:o},b()(E+"/api/import_triples/",{body:JSON.stringify(a),method:"POST"});case 3:t=e.sent,alert(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.message);case 10:case"end":return e.stop()}var a},e,null,[[0,7]])}))).apply(this,arguments)}var j=Object(n.useCallback)(function(e){if(0!==e.length){var t=e[0],a=new FileReader,n=!!a.readAsBinaryString;a.onload=function(e){for(var t=e.target.result,a=window.XLSX.read(t,{type:n?"binary":"array"}),r=a.SheetNames[0],l=a.Sheets[r],u=window.XLSX.utils.sheet_to_json(l,{header:1}),o=u[0],i=o.length,s=u.length,m=[],f=1;f<s;f++){for(var v={},d=0;d<i;d++)v[o[d]]=u[f][d];v.id=f,m.push(v)}c(o),p(m)},n?a.readAsBinaryString(t):a.readAsArrayBuffer(t)}},[]),O=Object(v.a)({onDrop:j}),k=O.getRootProps,x=O.getInputProps,S=O.isDragActive;return r.a.createElement("div",{className:"App-main"},r.a.createElement("div",Object.assign({className:"upload"},k()),r.a.createElement("input",x()),S?r.a.createElement("p",null,"Drop the files here ..."):r.a.createElement("p",null,"Drag 'n' drop some files here, or click to select files")),o.length>0&&r.a.createElement("div",{className:"preview import"},r.a.createElement(d.Grid,{columns:a.map(function(e){return{title:function(){return e},value:function(t,a){var n=a.focus;return r.a.createElement(d.Input,{value:t[e],focus:n})}}}),rows:o,getRowKey:function(e){return e.id}}),r.a.createElement("div",{className:"import-btn"},r.a.createElement("select",{onChange:function(e){var t=e.target;y(t.value)},value:w},r.a.createElement("option",{value:""},"\u8bf7\u9009\u62e9\u5b9e\u4f53\u5b57\u6bb5"),a.map(function(e){return r.a.createElement("option",{key:e,value:e}," ",e," ")}))," \xa0",r.a.createElement("button",{onClick:function(){return g.apply(this,arguments)}}," \u5bfc\u5165 "))))}function _(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),u=Object(m.a)(l,2),o=u[0],p=u[1];function f(){return(f=Object(s.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b()(E+"/api/export_triples/");case 2:t=e.sent,p(t),t.length>0&&c(Object.keys(t[0]));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(n.useEffect)(function(){!function(){f.apply(this,arguments)}()},[]),r.a.createElement("div",{className:"App-main"},o.length>0&&r.a.createElement("div",{className:"preview"},r.a.createElement(d.Grid,{key:"grid",columns:a.map(function(e){return{title:function(){return e},value:function(t,a){var n=a.focus;return r.a.createElement(d.Input,{value:t[e],focus:n})}}}),rows:o,getRowKey:function(e){return e.subj},isColumnsResizable:!0}),r.a.createElement("div",{className:"import-btn",key:"button"},r.a.createElement("button",{onClick:function(){var e=[a],t=!0,n=!1,r=void 0;try{for(var c,l=o[Symbol.iterator]();!(t=(c=l.next()).done);t=!0){var u=c.value,i=[],s=!0,m=!1,p=void 0;try{for(var f,v=a[Symbol.iterator]();!(s=(f=v.next()).done);s=!0){var d=f.value;i.push(u[d])}}catch(E){m=!0,p=E}finally{try{s||null==v.return||v.return()}finally{if(m)throw p}}e.push(i)}}catch(E){n=!0,r=E}finally{try{t||null==l.return||l.return()}finally{if(n)throw r}}var h=window.XLSX.utils.aoa_to_sheet(e),b=window.XLSX.utils.book_new();window.XLSX.utils.book_append_sheet(b,h,"SheetJS"),window.XLSX.writeFile(b,"sheetjs.xlsx")}}," \u5bfc\u51fa "))))}var X=function(){return r.a.createElement(p.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(f.a,{path:"/",exact:!0,component:O}),r.a.createElement(f.a,{path:"/chat",exact:!0,component:N}),r.a.createElement(f.a,{path:"/import",exact:!0,component:C}),r.a.createElement(f.a,{path:"/export",exact:!0,component:_})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},76:function(e,t,a){e.exports=a(142)},81:function(e,t,a){},85:function(e,t,a){}},[[76,1,2]]]);
//# sourceMappingURL=main.f8f54855.chunk.js.map